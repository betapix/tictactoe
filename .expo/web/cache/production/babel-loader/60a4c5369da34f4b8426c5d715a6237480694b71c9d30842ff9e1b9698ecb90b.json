{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import{Platform,UnavailabilityError}from'expo-modules-core';import invariant from'invariant';import Dimensions from\"react-native-web/dist/exports/Dimensions\";function getBasePath(_ref){var httpServerLocation=_ref.httpServerLocation;if(httpServerLocation[0]==='/'){return httpServerLocation.substr(1);}return httpServerLocation;}function getScale(){return Dimensions.get('window').scale;}function getScaledAssetPath(asset){var scale=AssetSourceResolver.pickScale(asset.scales,getScale());var scaleSuffix=scale===1?'':'@'+scale+'x';var assetDir=getBasePath(asset);return assetDir+'/'+asset.name+scaleSuffix+(asset.type?\".\"+asset.type:'');}var AssetSourceResolver=function(){function AssetSourceResolver(serverUrl,jsbundleUrl,asset){_classCallCheck(this,AssetSourceResolver);this.serverUrl=serverUrl;this.jsbundleUrl=jsbundleUrl;this.asset=asset;}_createClass(AssetSourceResolver,[{key:\"isLoadedFromServer\",value:function isLoadedFromServer(){return!!this.serverUrl;}},{key:\"isLoadedFromFileSystem\",value:function isLoadedFromFileSystem(){return!!(this.jsbundleUrl&&this.jsbundleUrl.startsWith('file://'));}},{key:\"defaultAsset\",value:function defaultAsset(){if(this.isLoadedFromServer()){return this.assetServerURL();}return this.scaledAssetURLNearBundle();}},{key:\"assetServerURL\",value:function assetServerURL(){invariant(!!this.serverUrl,'need server to load from');return this.fromSource(this.serverUrl+getScaledAssetPath(this.asset)+'?platform='+Platform.OS+'&hash='+this.asset.hash);}},{key:\"scaledAssetPath\",value:function scaledAssetPath(){return this.fromSource(getScaledAssetPath(this.asset));}},{key:\"scaledAssetURLNearBundle\",value:function scaledAssetURLNearBundle(){var path=this.jsbundleUrl||'';return this.fromSource(path+getScaledAssetPath(this.asset));}},{key:\"resourceIdentifierWithoutScale\",value:function resourceIdentifierWithoutScale(){throw new UnavailabilityError('react-native','resourceIdentifierWithoutScale()');}},{key:\"drawableFolderInBundle\",value:function drawableFolderInBundle(){throw new UnavailabilityError('react-native','drawableFolderInBundle()');}},{key:\"fromSource\",value:function fromSource(source){return{__packager_asset:true,width:this.asset.width,height:this.asset.height,uri:source,scale:AssetSourceResolver.pickScale(this.asset.scales,getScale())};}}],[{key:\"pickScale\",value:function pickScale(scales,deviceScale){for(var i=0;i<scales.length;i++){if(scales[i]>=deviceScale){return scales[i];}}return scales[scales.length-1]||1;}}]);return AssetSourceResolver;}();export{AssetSourceResolver as default};","map":{"version":3,"names":["Platform","UnavailabilityError","invariant","Dimensions","getBasePath","_ref","httpServerLocation","substr","getScale","get","scale","getScaledAssetPath","asset","AssetSourceResolver","pickScale","scales","scaleSuffix","assetDir","name","type","serverUrl","jsbundleUrl","_classCallCheck","_createClass","key","value","isLoadedFromServer","isLoadedFromFileSystem","startsWith","defaultAsset","assetServerURL","scaledAssetURLNearBundle","fromSource","OS","hash","scaledAssetPath","path","resourceIdentifierWithoutScale","drawableFolderInBundle","source","__packager_asset","width","height","uri","deviceScale","i","length","default"],"sources":["E:\\Projects\\IN_BUILD\\TicTacToe\\node_modules\\expo-asset\\src\\AssetSourceResolver.web.ts"],"sourcesContent":["import { Platform, UnavailabilityError } from 'expo-modules-core';\nimport invariant from 'invariant';\nimport { Dimensions } from 'react-native';\n\ntype PackagerAsset = {\n  __packager_asset: boolean;\n  fileSystemLocation: string;\n  httpServerLocation: string;\n  width?: number;\n  height?: number;\n  scales: number[];\n  hash: string;\n  name: string;\n  type: string;\n};\n\nfunction getBasePath({ httpServerLocation }: PackagerAsset): string {\n  if (httpServerLocation[0] === '/') {\n    return httpServerLocation.substr(1);\n  }\n  return httpServerLocation;\n}\n\nexport type ResolvedAssetSource = {\n  __packager_asset: boolean;\n  width?: number;\n  height?: number;\n  uri: string;\n  scale: number;\n};\n\nfunction getScale(): number {\n  return Dimensions.get('window').scale;\n}\n\nfunction getScaledAssetPath(asset): string {\n  const scale = AssetSourceResolver.pickScale(asset.scales, getScale());\n  const scaleSuffix = scale === 1 ? '' : '@' + scale + 'x';\n  const assetDir = getBasePath(asset);\n  return assetDir + '/' + asset.name + scaleSuffix + (asset.type ? `.${asset.type}` : '');\n}\n\nexport default class AssetSourceResolver {\n  serverUrl?: string | null;\n  // where the jsbundle is being run from\n  jsbundleUrl?: string | null;\n  // the asset to resolve\n  asset: PackagerAsset;\n\n  constructor(\n    serverUrl: string | undefined | null,\n    jsbundleUrl: string | undefined | null,\n    asset: PackagerAsset\n  ) {\n    this.serverUrl = serverUrl;\n    this.jsbundleUrl = jsbundleUrl;\n    this.asset = asset;\n  }\n  isLoadedFromServer(): boolean {\n    return !!this.serverUrl;\n  }\n  isLoadedFromFileSystem(): boolean {\n    return !!(this.jsbundleUrl && this.jsbundleUrl.startsWith('file://'));\n  }\n  defaultAsset(): ResolvedAssetSource {\n    if (this.isLoadedFromServer()) {\n      return this.assetServerURL();\n    }\n\n    return this.scaledAssetURLNearBundle();\n  }\n  assetServerURL(): ResolvedAssetSource {\n    invariant(!!this.serverUrl, 'need server to load from');\n    return this.fromSource(\n      this.serverUrl +\n        getScaledAssetPath(this.asset) +\n        '?platform=' +\n        Platform.OS +\n        '&hash=' +\n        this.asset.hash\n    );\n  }\n  scaledAssetPath(): ResolvedAssetSource {\n    return this.fromSource(getScaledAssetPath(this.asset));\n  }\n  scaledAssetURLNearBundle(): ResolvedAssetSource {\n    const path = this.jsbundleUrl || '';\n    return this.fromSource(path + getScaledAssetPath(this.asset));\n  }\n  resourceIdentifierWithoutScale(): ResolvedAssetSource {\n    throw new UnavailabilityError('react-native', 'resourceIdentifierWithoutScale()');\n  }\n  drawableFolderInBundle(): ResolvedAssetSource {\n    throw new UnavailabilityError('react-native', 'drawableFolderInBundle()');\n  }\n  fromSource(source: string): ResolvedAssetSource {\n    return {\n      __packager_asset: true,\n      width: this.asset.width,\n      height: this.asset.height,\n      uri: source,\n      scale: AssetSourceResolver.pickScale(this.asset.scales, getScale()),\n    };\n  }\n\n  static pickScale(scales: number[], deviceScale: number): number {\n    for (let i = 0; i < scales.length; i++) {\n      if (scales[i] >= deviceScale) {\n        return scales[i];\n      }\n    }\n    return scales[scales.length - 1] || 1;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}